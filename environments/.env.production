# =============================================
# FuelTune Streamlit - Production Environment
# =============================================
# Configuration for production environment
# IMPORTANT: All sensitive values should be set via secrets management

# =============================================
# Application Configuration
# =============================================
APP_NAME="FuelTune Streamlit"
APP_VERSION="1.0.0"
APP_ENV="production"
DEBUG="false"
LOG_LEVEL="WARNING"

# =============================================
# Server Configuration
# =============================================
STREAMLIT_SERVER_PORT="8501"
STREAMLIT_SERVER_ADDRESS="0.0.0.0"
STREAMLIT_SERVER_HEADLESS="true"
STREAMLIT_BROWSER_GATHER_USAGE_STATS="false"
STREAMLIT_THEME_BASE="light"
STREAMLIT_SERVER_MAX_UPLOAD_SIZE="50"
STREAMLIT_SERVER_MAX_MESSAGE_SIZE="200"
STREAMLIT_SERVER_ENABLE_CORS="false"
STREAMLIT_SERVER_ENABLE_XSRF_PROTECTION="true"

# =============================================
# Database Configuration
# =============================================
# SECURITY: These values should be set via Kubernetes secrets
# or AWS Secrets Manager in actual deployment
DATABASE_URL=""  # Set via secret: fueltune-database-secret/database-url
DB_POOL_SIZE="20"
DB_MAX_OVERFLOW="50"
DB_POOL_TIMEOUT="60"
DB_POOL_RECYCLE="7200"

# =============================================
# Redis Configuration
# =============================================
# SECURITY: These values should be set via Kubernetes secrets
REDIS_URL=""  # Set via secret: fueltune-redis-secret/redis-url
REDIS_MAX_CONNECTIONS="100"
REDIS_SOCKET_TIMEOUT="10"

# =============================================
# Data Processing Configuration
# =============================================
MAX_FILE_SIZE="50MB"
ALLOWED_EXTENSIONS="csv,xlsx,xls"
FUELTECH_FIELDS_COUNT="64"
CACHE_EXPIRY_HOURS="24"

# =============================================
# Security Configuration
# =============================================
# SECURITY: These MUST be set via secrets management
SECRET_KEY=""           # Set via secret: fueltune-secrets/secret-key
JWT_SECRET_KEY=""       # Set via secret: fueltune-secrets/jwt-secret
ENCRYPTION_KEY=""       # Set via secret: fueltune-secrets/encryption-key

# Security headers and cookies
SESSION_COOKIE_SECURE="true"
SESSION_COOKIE_HTTPONLY="true"
SESSION_COOKIE_SAMESITE="Strict"

CSRF_ENABLED="true"
CSRF_TIME_LIMIT="3600"

# =============================================
# File Storage Configuration
# =============================================
STORAGE_TYPE="s3"
UPLOAD_FOLDER="uploads"
PROCESSED_FOLDER="processed"
BACKUP_FOLDER="backups"

# AWS S3 Configuration
AWS_DEFAULT_REGION="us-west-2"
S3_BUCKET_NAME="fueltune-production-storage"

# =============================================
# Monitoring and Observability
# =============================================
METRICS_ENABLED="true"
METRICS_PORT="8501"
METRICS_PATH="/metrics"
HEALTH_CHECK_PATH="/_stcore/health"

# OpenTelemetry Configuration
OTEL_ENABLED="true"
OTEL_SERVICE_NAME="fueltune-streamlit"
OTEL_EXPORTER_OTLP_ENDPOINT="http://otel-collector:4317"

# Sentry Configuration
SENTRY_ENVIRONMENT="production"
SENTRY_RELEASE=""  # Set via deployment pipeline

# =============================================
# Logging Configuration
# =============================================
LOG_FORMAT="json"
LOG_DATEFORMAT="%Y-%m-%d %H:%M:%S"
LOG_MAX_BYTES="20971520"  # 20MB
LOG_BACKUP_COUNT="10"
LOG_FILE="/var/log/fueltune/fueltune.log"

# External logging
PAPERTRAIL_HOST=""      # Set via secret if used
ELASTICSEARCH_URL=""    # Set via secret if used

# =============================================
# Email Configuration
# =============================================
SMTP_SERVER="smtp.fueltune.com"
SMTP_PORT="587"
SMTP_USE_TLS="true"
SMTP_USERNAME=""        # Set via secret: fueltune-email-secret/username
SMTP_PASSWORD=""        # Set via secret: fueltune-email-secret/password
MAIL_FROM="noreply@fueltune.com"
MAIL_ADMIN="admin@fueltune.com"

# =============================================
# Notification Configuration
# =============================================
# SECURITY: Webhook URLs should be set via secrets
SLACK_WEBHOOK_URL=""    # Set via secret: fueltune-notifications/slack-webhook
SLACK_CHANNEL="#fueltune-prod"
SLACK_USERNAME="FuelTune Production"

TEAMS_WEBHOOK_URL=""    # Set via secret: fueltune-notifications/teams-webhook
PAGERDUTY_INTEGRATION_KEY=""  # Set via secret: fueltune-notifications/pagerduty-key

# =============================================
# Rate Limiting Configuration
# =============================================
RATE_LIMIT_ENABLED="true"
RATE_LIMIT_PER_MINUTE="100"
RATE_LIMIT_PER_HOUR="1000"
RATE_LIMIT_PER_DAY="10000"

# =============================================
# Backup Configuration
# =============================================
BACKUP_ENABLED="true"
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM UTC
BACKUP_RETENTION_DAYS="30"
BACKUP_COMPRESSION="gzip"

# =============================================
# Feature Flags (Production)
# =============================================
FEATURE_ADVANCED_ANALYTICS="true"
FEATURE_EXPORT_DATA="true"
FEATURE_REAL_TIME_MONITORING="true"
FEATURE_BETA_UI="false"  # Disable beta features in production

# =============================================
# Performance Configuration
# =============================================
WORKER_PROCESSES="auto"
WORKER_TIMEOUT="30"
KEEP_ALIVE="5"
MAX_REQUESTS="2000"
MAX_REQUESTS_JITTER="100"

# Connection pool settings
CONNECTION_POOL_SIZE="50"
CONNECTION_POOL_OVERFLOW="20"
CONNECTION_POOL_TIMEOUT="60"

# =============================================
# Kubernetes Configuration
# =============================================
POD_NAME=""       # Set by Kubernetes downward API
POD_NAMESPACE="fueltune"
POD_IP=""         # Set by Kubernetes downward API
NODE_NAME=""      # Set by Kubernetes downward API

KUBERNETES_SERVICE_HOST=""  # Set by Kubernetes
KUBERNETES_SERVICE_PORT=""  # Set by Kubernetes

# =============================================
# Cloud Provider Configuration
# =============================================
AWS_REGION="us-west-2"
AWS_EKS_CLUSTER_NAME="fueltune-production-cluster"
AWS_ACCOUNT_ID=""  # Set via environment

# =============================================
# High Availability Configuration
# =============================================
ENABLE_CIRCUIT_BREAKER="true"
CIRCUIT_BREAKER_THRESHOLD="50"
CIRCUIT_BREAKER_TIMEOUT="60"

ENABLE_RETRY_LOGIC="true"
MAX_RETRY_ATTEMPTS="3"
RETRY_BACKOFF_FACTOR="2"

# =============================================
# Compliance and Security
# =============================================
GDPR_COMPLIANCE="true"
DATA_RETENTION_DAYS="2555"  # 7 years
AUDIT_LOGGING="true"
ENCRYPTION_AT_REST="true"
ENCRYPTION_IN_TRANSIT="true"

# Data classification
DATA_CLASSIFICATION="CONFIDENTIAL"
PII_ENCRYPTION="true"
AUDIT_LOG_RETENTION_YEARS="7"

# =============================================
# External API Configuration
# =============================================
FUELTECH_API_ENDPOINT="https://api.fueltech.com"
FUELTECH_API_KEY=""  # Set via secret: fueltune-external-apis/fueltech-key
FUELTECH_DEFAULT_SAMPLE_RATE="1000"
FUELTECH_TIMEOUT="30"

ANALYTICS_API_URL=""  # Set via secret if used
ANALYTICS_API_KEY=""  # Set via secret: fueltune-external-apis/analytics-key

# =============================================
# Custom Production Configuration
# =============================================
DEFAULT_ANALYSIS_WINDOW="300"
MAX_ANALYSIS_RECORDS="1000000"
ENABLE_PREDICTIVE_ANALYSIS="true"

# Advanced features
ENABLE_ML_PREDICTIONS="true"
ML_MODEL_CACHE_SIZE="100"
ML_INFERENCE_TIMEOUT="10"

# Data pipeline settings
BATCH_PROCESSING_SIZE="1000"
PARALLEL_PROCESSING_WORKERS="4"
DATA_VALIDATION_STRICT="true"

# =============================================
# UI Configuration
# =============================================
CUSTOM_THEME_URL=""  # Set via config if customized
CUSTOM_LOGO_URL=""   # Set via config if customized
COMPANY_NAME="FuelTune"
SUPPORT_EMAIL="support@fueltune.com"

# Branding
BRAND_PRIMARY_COLOR="#1f77b4"
BRAND_SECONDARY_COLOR="#ff7f0e"
FAVICON_URL=""

# =============================================
# Cache Configuration
# =============================================
CACHE_TYPE="redis"  # redis, memory, hybrid
CACHE_DEFAULT_TIMEOUT="3600"
CACHE_MAX_SIZE="1GB"
CACHE_EVICTION_POLICY="lru"

# Application-level caching
ENABLE_QUERY_CACHE="true"
ENABLE_RESULT_CACHE="true"
ENABLE_STATIC_CACHE="true"

# =============================================
# Security Scanning and Monitoring
# =============================================
SECURITY_SCAN_ENABLED="true"
VULNERABILITY_SCAN_SCHEDULE="0 4 * * *"  # Daily at 4 AM
DEPENDENCY_CHECK_ENABLED="true"

# Runtime security
RUNTIME_PROTECTION="true"
ANOMALY_DETECTION="true"
BEHAVIORAL_ANALYSIS="true"

# =============================================
# Disaster Recovery Configuration
# =============================================
DR_ENABLED="true"
DR_BACKUP_FREQUENCY="6h"
DR_REPLICATION_ENABLED="true"
DR_FAILOVER_TIMEOUT="300"  # 5 minutes

CROSS_REGION_BACKUP="true"
BACKUP_VERIFICATION="true"
RTO_TARGET="60"   # Recovery Time Objective: 1 hour
RPO_TARGET="15"   # Recovery Point Objective: 15 minutes

# =============================================
# Production Maintenance Windows
# =============================================
MAINTENANCE_WINDOW_START="02:00"  # UTC
MAINTENANCE_WINDOW_END="04:00"    # UTC
MAINTENANCE_WINDOW_TIMEZONE="UTC"
MAINTENANCE_NOTIFICATIONS="true"

# Deployment settings
BLUE_GREEN_DEPLOYMENT="true"
CANARY_DEPLOYMENT="false"
ROLLBACK_ON_FAILURE="true"
HEALTH_CHECK_GRACE_PERIOD="60"