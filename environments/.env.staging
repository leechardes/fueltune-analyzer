# =============================================
# FuelTune Streamlit - Staging Environment
# =============================================
# Configuration for staging/testing environment

# =============================================
# Application Configuration
# =============================================
APP_NAME="FuelTune Streamlit (Staging)"
APP_VERSION="staging"
APP_ENV="staging"
DEBUG="false"
LOG_LEVEL="INFO"

# =============================================
# Server Configuration
# =============================================
STREAMLIT_SERVER_PORT="8501"
STREAMLIT_SERVER_ADDRESS="0.0.0.0"
STREAMLIT_SERVER_HEADLESS="true"
STREAMLIT_BROWSER_GATHER_USAGE_STATS="false"
STREAMLIT_THEME_BASE="light"
STREAMLIT_SERVER_MAX_UPLOAD_SIZE="50"
STREAMLIT_SERVER_MAX_MESSAGE_SIZE="200"
STREAMLIT_SERVER_ENABLE_CORS="false"
STREAMLIT_SERVER_ENABLE_XSRF_PROTECTION="true"

# =============================================
# Database Configuration
# =============================================
# Use environment variables or secrets management for actual values
DATABASE_URL="postgresql://fueltune:staging_password@postgres-staging:5432/fueltune_staging"
DB_POOL_SIZE="8"
DB_MAX_OVERFLOW="15"
DB_POOL_TIMEOUT="30"
DB_POOL_RECYCLE="3600"

# =============================================
# Redis Configuration
# =============================================
REDIS_URL="redis://redis-staging:6379/0"
REDIS_HOST="redis-staging"
REDIS_PORT="6379"
REDIS_DB="0"
REDIS_PASSWORD=""  # Set via secrets in actual deployment
REDIS_MAX_CONNECTIONS="30"
REDIS_SOCKET_TIMEOUT="5"

# =============================================
# Data Processing Configuration
# =============================================
MAX_FILE_SIZE="50MB"
ALLOWED_EXTENSIONS="csv,xlsx,xls"
FUELTECH_FIELDS_COUNT="64"
CACHE_EXPIRY_HOURS="12"

# =============================================
# Security Configuration
# =============================================
# These should be set via secrets management in actual deployment
SECRET_KEY="staging_secret_key_replace_in_deployment"
JWT_SECRET_KEY="staging_jwt_secret_replace_in_deployment"
ENCRYPTION_KEY="staging_encryption_key_replace_in_deployment"

SESSION_COOKIE_SECURE="true"
SESSION_COOKIE_HTTPONLY="true"
SESSION_COOKIE_SAMESITE="Strict"

CSRF_ENABLED="true"
CSRF_TIME_LIMIT="3600"

# =============================================
# File Storage Configuration
# =============================================
STORAGE_TYPE="s3"  # Use S3 for staging
UPLOAD_FOLDER="data/uploads"
PROCESSED_FOLDER="data/processed"
BACKUP_FOLDER="data/backups"

# AWS S3 Configuration
AWS_DEFAULT_REGION="us-west-2"
S3_BUCKET_NAME="fueltune-staging-storage"

# =============================================
# Monitoring and Observability
# =============================================
METRICS_ENABLED="true"
METRICS_PORT="8501"
METRICS_PATH="/metrics"
HEALTH_CHECK_PATH="/_stcore/health"

# OpenTelemetry Configuration
OTEL_ENABLED="true"
OTEL_SERVICE_NAME="fueltune-streamlit-staging"
OTEL_EXPORTER_OTLP_ENDPOINT="http://otel-collector:4317"

# Sentry Configuration
SENTRY_ENVIRONMENT="staging"
SENTRY_RELEASE="staging"

# =============================================
# Logging Configuration
# =============================================
LOG_FORMAT="json"
LOG_DATEFORMAT="%Y-%m-%d %H:%M:%S"
LOG_MAX_BYTES="10485760"  # 10MB
LOG_BACKUP_COUNT="5"
LOG_FILE="logs/fueltune_staging.log"

# =============================================
# Email Configuration
# =============================================
SMTP_SERVER="smtp.staging.fueltune.com"
SMTP_PORT="587"
SMTP_USE_TLS="true"
MAIL_FROM="staging@fueltune.com"
MAIL_ADMIN="admin@fueltune.com"

# =============================================
# Notification Configuration
# =============================================
SLACK_CHANNEL="#fueltune-staging"
SLACK_USERNAME="FuelTune Staging"

# =============================================
# Rate Limiting Configuration
# =============================================
RATE_LIMIT_ENABLED="true"
RATE_LIMIT_PER_MINUTE="200"
RATE_LIMIT_PER_HOUR="2000"
RATE_LIMIT_PER_DAY="20000"

# =============================================
# Backup Configuration
# =============================================
BACKUP_ENABLED="true"
BACKUP_SCHEDULE="0 3 * * *"  # Daily at 3 AM
BACKUP_RETENTION_DAYS="14"
BACKUP_COMPRESSION="gzip"

# =============================================
# Feature Flags (Staging)
# =============================================
FEATURE_ADVANCED_ANALYTICS="true"
FEATURE_EXPORT_DATA="true"
FEATURE_REAL_TIME_MONITORING="true"
FEATURE_BETA_UI="true"  # Test beta features in staging

# =============================================
# Performance Configuration
# =============================================
WORKER_PROCESSES="2"
WORKER_TIMEOUT="30"
KEEP_ALIVE="2"
MAX_REQUESTS="1000"
MAX_REQUESTS_JITTER="50"

# =============================================
# Kubernetes Configuration
# =============================================
POD_NAME=""  # Set by Kubernetes
POD_NAMESPACE="fueltune-staging"
POD_IP=""    # Set by Kubernetes
NODE_NAME="" # Set by Kubernetes

# =============================================
# Cloud Provider Configuration
# =============================================
AWS_REGION="us-west-2"
AWS_EKS_CLUSTER_NAME="fueltune-staging-cluster"

# =============================================
# Compliance and Security
# =============================================
GDPR_COMPLIANCE="true"
DATA_RETENTION_DAYS="90"  # Shorter retention for staging
AUDIT_LOGGING="true"
ENCRYPTION_AT_REST="true"
ENCRYPTION_IN_TRANSIT="true"

# =============================================
# External API Configuration
# =============================================
FUELTECH_API_ENDPOINT="https://api-staging.fueltech.com"
FUELTECH_DEFAULT_SAMPLE_RATE="100"

# =============================================
# Custom Staging Configuration
# =============================================
DEFAULT_ANALYSIS_WINDOW="300"
MAX_ANALYSIS_RECORDS="50000"
ENABLE_PREDICTIVE_ANALYSIS="true"

# UI Configuration
COMPANY_NAME="FuelTune Staging"
SUPPORT_EMAIL="support+staging@fueltune.com"

# Testing specific
ENABLE_TEST_DATA="true"
MOCK_EXTERNAL_APIS="true"
SYNTHETIC_DATA_GENERATION="true"

# Performance testing
LOAD_TEST_MODE="false"
STRESS_TEST_MODE="false"

# Integration testing
ENABLE_E2E_TESTS="true"
TEST_USER_CREDENTIALS="test:staging123"